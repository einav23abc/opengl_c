char font_vert_sh[] = "#version 150\nin vec3 in_vertex_position;\nin vec2 in_vertex_texcoord;\n\nvarying vec3 v_position;\nvarying vec2 v_texcoord;\n\nuniform mat4 u_camera_world_view_projection_matrix;\n\nuniform vec3 u_position;\nuniform vec3 u_scale;\nuniform vec4 u_quat_rotation;\n\nvec4 quat_multiply(vec4 q1, vec4 q2) {\n    return vec4(\n        (q1.w*q2.x + q1.x*q2.w + q1.y*q2.z - q1.z*q2.y),\n        (q1.w*q2.y - q1.x*q2.z + q1.y*q2.w + q1.z*q2.x),\n        (q1.w*q2.z + q1.x*q2.y - q1.y*q2.x + q1.z*q2.w),\n        (q1.w*q2.w - q1.x*q2.x - q1.y*q2.y - q1.z*q2.z)\n    );\n}\nvec4 quat_conjugate(vec4 q) {\n    return vec4(-q.xyz, q.w);\n}\nvec3 rotate_vector(vec3 vec, vec4 q) {\n    vec4 q_vec = vec4(vec, 0);\n    vec4 q_res = quat_multiply(quat_multiply(q,q_vec),quat_conjugate(q));\n    return q_res.xyz;\n}\n\nvoid main() {\n    vec3 model_position = in_vertex_position;\n\n    vec3 position = rotate_vector(model_position*u_scale, u_quat_rotation) + u_position;\n\n    v_texcoord = in_vertex_texcoord;\n\n    gl_Position = vec4(position, 1.0)*u_camera_world_view_projection_matrix;\n}";char font_frag_sh[] = "#version 150\n#define MAX_TEXT_ROW_LENGTH (64)\n\nvarying vec2 v_texcoord;\n\nuniform sampler2D u_texture;\n\nuniform int u_text_row_length;\nuniform int u_text_row[MAX_TEXT_ROW_LENGTH];\n/* x = letters in row\n * y = letters in col\n */\nuniform ivec2 u_font_data;\n\nuniform vec3 u_color;\n\n\nvoid main(){\n    int text_row_index = int(v_texcoord.x*u_text_row_length);\n    if (text_row_index >= MAX_TEXT_ROW_LENGTH) {\n        text_row_index = 0;\n    }\n    int letter_index = u_text_row[text_row_index];\n\n    vec2 letter_texcoord = vec2(\n        v_texcoord.x*u_text_row_length - floor(v_texcoord.x*u_text_row_length),\n        v_texcoord.y\n    );\n\n    if (letter_index >= u_font_data.x*u_font_data.y) {\n        letter_index = 0;\n    }\n\n    vec2 font_texture_letter_position = vec2(\n        float(letter_index % u_font_data.x)/float(u_font_data.x),\n        float(letter_index / u_font_data.x)/float(u_font_data.y)\n    );\n\n    vec2 final_texcoord = font_texture_letter_position + letter_texcoord/vec2(u_font_data.x, u_font_data.y);\n\n    vec4 color = texture2D(u_texture, final_texcoord);\n    \n    gl_FragColor = vec4(color.rgb*u_color, color.a);\n}";